name: Python CI workflow
on: [push, pull_request]


jobs:

  build:
    runs-on: ubuntu-latest
    environment: DEV
    container:
      image: akdocker528/food_kart:latest
      credentials:
        username: ${{secrets.DOCKER_USERNAME}}
        password: ${{secrets.DOKCER_PASSWORD}}
      volumes:
        - ${{github.workspace}}:/code

    steps:
      - name: echo workspace
        run: echo "${{ github.workspace }}"

      - name: checkout
        uses: actions/checkout@v4

      - name: list repo and ref
        run: |
          echo "${{github.ref}}" REF
          echo "${{github.repository}}" REPO
      
      - name:  echo workspace after  checkout
        run: echo ${{ github.workspace }}

      - name : install tree
        run: apt install tree

      - name : run python
        run: python -m tdd_food_kart_1


